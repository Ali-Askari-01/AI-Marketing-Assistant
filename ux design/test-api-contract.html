<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Contract Test - AI Marketing Command Center</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="js/config.js"></script>
    <script src="js/api-contract.js"></script>
</head>
<body class="bg-gray-50 font-inter antialiased">
    <div class="min-h-screen p-8">
        <div class="max-w-4xl mx-auto">
            <!-- Header -->
            <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
                <h1 class="text-3xl font-bold text-gray-900 mb-2">
                    <i class="fas fa-link text-teal-500 mr-3"></i>
                    API Contract Test
                </h1>
                <p class="text-gray-600">Test the new API contract implementation</p>
            </div>

            <!-- Auth Section -->
            <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
                <h2 class="text-xl font-semibold text-gray-900 mb-4">
                    <i class="fas fa-user-shield text-blue-500 mr-2"></i>
                    Authentication
                </h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <h3 class="font-medium text-gray-700 mb-2">Register</h3>
                        <button onclick="testRegister()" class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors">
                            <i class="fas fa-user-plus mr-2"></i>Test Register
                        </button>
                        <div id="registerResult" class="mt-2 p-3 bg-gray-50 rounded-lg text-sm font-mono"></div>
                    </div>
                    
                    <div>
                        <h3 class="font-medium text-gray-700 mb-2">Login</h3>
                        <button onclick="testLogin()" class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors">
                            <i class="fas fa-sign-in-alt mr-2"></i>Test Login
                        </button>
                        <div id="loginResult" class="mt-2 p-3 bg-gray-50 rounded-lg text-sm font-mono"></div>
                    </div>
                </div>
            </div>

            <!-- Business Section -->
            <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
                <h2 class="text-xl font-semibold text-gray-900 mb-4">
                    <i class="fas fa-building text-purple-500 mr-2"></i>
                    Business Management
                </h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <h3 class="font-medium text-gray-700 mb-2">Create Business</h3>
                        <button onclick="testCreateBusiness()" class="bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 transition-colors">
                            <i class="fas fa-plus-circle mr-2"></i>Test Create Business
                        </button>
                        <div id="createBusinessResult" class="mt-2 p-3 bg-gray-50 rounded-lg text-sm font-mono"></div>
                    </div>
                    
                    <div>
                        <h3 class="font-medium text-gray-700 mb-2">Get Businesses</h3>
                        <button onclick="testGetBusinesses()" class="bg-indigo-500 text-white px-4 py-2 rounded-lg hover:bg-indigo-600 transition-colors">
                            <i class="fas fa-list mr-2"></i>Test Get Businesses
                        </button>
                        <div id="getBusinessesResult" class="mt-2 p-3 bg-gray-50 rounded-lg text-sm font-mono"></div>
                    </div>
                </div>
            </div>

            <!-- Campaign Section -->
            <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
                <h2 class="text-xl font-semibold text-gray-900 mb-4">
                    <i class="fas fa-calendar-alt text-orange-500 mr-2"></i>
                    Campaign Management
                </h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <h3 class="font-medium text-gray-700 mb-2">Generate Campaign Strategy</h3>
                        <button onclick="testGenerateCampaign()" class="bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition-colors">
                            <i class="fas fa-magic mr-2"></i>Test Generate Strategy
                        </button>
                        <div id="generateCampaignResult" class="mt-2 p-3 bg-gray-50 rounded-lg text-sm font-mono"></div>
                    </div>
                    
                    <div>
                        <h3 class="font-medium text-gray-700 mb-2">Get Campaigns</h3>
                        <button onclick="testGetCampaigns()" class="bg-yellow-500 text-white px-4 py-2 rounded-lg hover:bg-yellow-600 transition-colors">
                            <i class="fas fa-list-alt mr-2"></i>Test Get Campaigns
                        </button>
                        <div id="getCampaignsResult" class="mt-2 p-3 bg-gray-50 rounded-lg text-sm font-mono"></div>
                    </div>
                </div>
            </div>

            <!-- Content Section -->
            <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
                <h2 class="text-xl font-semibold text-gray-900 mb-4">
                    <i class="fas fa-pen-fancy text-pink-500 mr-2"></i>
                    Content Generation
                </h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <h3 class="font-medium text-gray-700 mb-2">Generate Content</h3>
                        <button onclick="testGenerateContent()" class="bg-pink-500 text-white px-4 py-2 rounded-lg hover:bg-pink-600 transition-colors">
                            <i class="fas fa-pen mr-2"></i>Test Generate Content
                        </button>
                        <div id="generateContentResult" class="mt-2 p-3 bg-gray-50 rounded-lg text-sm font-mono"></div>
                    </div>
                    
                    <div>
                        <h3 class="font-medium text-gray-700 mb-2">Get Content</h3>
                        <button onclick="testGetContent()" class="bg-rose-500 text-white px-4 py-2 rounded-lg hover:bg-rose-600 transition-colors">
                            <i class="fas fa-file-alt mr-2"></i>Test Get Content
                        </button>
                        <div id="getContentResult" class="mt-2 p-3 bg-gray-50 rounded-lg text-sm font-mono"></div>
                    </div>
                </div>
            </div>

            <!-- Analytics Section -->
            <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
                <h2 class="text-xl font-semibold text-gray-900 mb-4">
                    <i class="fas fa-chart-line text-green-500 mr-2"></i>
                    Analytics
                </h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <h3 class="font-medium text-gray-700 mb-2">Get Business Analytics</h3>
                        <button onclick="testGetAnalytics()" class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors">
                            <i class="fas fa-chart-bar mr-2"></i>Test Get Analytics
                        </button>
                        <div id="getAnalyticsResult" class="mt-2 p-3 bg-gray-50 rounded-lg text-sm font-mono"></div>
                    </div>
                    
                    <div>
                        <h3 class="font-medium text-gray-700 mb-2">Get Health Score</h3>
                        <button onclick="testGetHealthScore()" class="bg-teal-500 text-white px-4 py-2 rounded-lg hover:bg-teal-600 transition-colors">
                            <i class="fas fa-heartbeat mr-2"></i>Test Health Score
                        </button>
                        <div id="getHealthScoreResult" class="mt-2 p-3 bg-gray-50 rounded-lg text-sm font-mono"></div>
                    </div>
                </div>
            </div>

            <!-- Messaging Section -->
            <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
                <h2 class="text-xl font-semibold text-gray-900 mb-4">
                    <i class="fas fa-comments text-blue-500 mr-2"></i>
                    Messaging
                </h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <h3 class="font-medium text-gray-700 mb-2">Get Messages</h3>
                        <button onclick="testGetMessages()" class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors">
                            <i class="fas fa-inbox mr-2"></i>Test Get Messages
                        </button>
                        <div id="getMessagesResult" class="mt-2 p-3 bg-gray-50 rounded-lg text-sm font-mono"></div>
                    </div>
                    
                    <div>
                        <h3 class="font-medium text-gray-700 mb-2">Generate AI Reply</h3>
                        <button onclick="testGenerateReply()" class="bg-cyan-500 text-white px-4 py-2 rounded-lg hover:bg-cyan-600 transition-colors">
                            <i class="fas fa-robot mr-2"></i>Test AI Reply
                        </button>
                        <div id="generateReplyResult" class="mt-2 p-3 bg-gray-50 rounded-lg text-sm font-mono"></div>
                    </div>
                </div>
            </div>

            <!-- Status Section -->
            <div class="bg-white rounded-2xl shadow-lg p-6">
                <h2 class="text-xl font-semibold text-gray-900 mb-4">
                    <i class="fas fa-heartbeat text-red-500 mr-2"></i>
                    System Status
                </h2>
                
                <button onclick="testHealthStatus()" class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors">
                    <i class="fas fa-stethoscope mr-2"></i>Test Health Status
                </button>
                <div id="healthStatusResult" class="mt-2 p-3 bg-gray-50 rounded-lg text-sm font-mono"></div>
            </div>
        </div>
    </div>

    <script>
        // Test functions
        async function testRegister() {
            const resultDiv = document.getElementById('registerResult');
            resultDiv.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Testing...';
            
            try {
                const result = await window.apiContract.demoRegister({
                    email: 'test@example.com',
                    password: 'password123'
                });
                resultDiv.innerHTML = `<span class="text-green-600">✅ Success:</span> ${JSON.stringify(result, null, 2)}`;
            } catch (error) {
                resultDiv.innerHTML = `<span class="text-red-600">❌ Error:</span> ${error.message}`;
            }
        }

        async function testLogin() {
            const resultDiv = document.getElementById('loginResult');
            resultDiv.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Testing...';
            
            try {
                const result = await window.apiContract.demoLogin({
                    email: 'test@example.com',
                    password: 'password123'
                });
                resultDiv.innerHTML = `<span class="text-green-600">✅ Success:</span> ${JSON.stringify(result, null, 2)}`;
            } catch (error) {
                resultDiv.innerHTML = `<span class="text-red-600">❌ Error:</span> ${error.message}`;
            }
        }

        async function testCreateBusiness() {
            const resultDiv = document.getElementById('createBusinessResult');
            resultDiv.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Testing...';
            
            try {
                const result = await window.apiContract.demoCreateBusiness({
                    name: 'Test Business',
                    industry: 'Technology',
                    target_audience: 'Tech professionals',
                    brand_tone: 'Professional',
                    primary_goal: 'Lead generation'
                });
                resultDiv.innerHTML = `<span class="text-green-600">✅ Success:</span> ${JSON.stringify(result, null, 2)}`;
            } catch (error) {
                resultDiv.innerHTML = `<span class="text-red-600">❌ Error:</span> ${error.message}`;
            }
        }

        async function testGetBusinesses() {
            const resultDiv = document.getElementById('getBusinessesResult');
            resultDiv.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Testing...';
            
            try {
                const result = await window.apiContract.getAllBusinesses();
                resultDiv.innerHTML = `<span class="text-green-600">✅ Success:</span> ${JSON.stringify(result, null, 2)}`;
            } catch (error) {
                resultDiv.innerHTML = `<span class="text-red-600">❌ Error:</span> ${error.message}`;
            }
        }

        async function testGenerateCampaign() {
            const resultDiv = document.getElementById('generateCampaignResult');
            resultDiv.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Testing...';
            
            try {
                const result = await window.apiContract.demoGenerateCampaignStrategy({
                    business_id: 'demo_business_1',
                    duration_days: 30
                });
                resultDiv.innerHTML = `<span class="text-green-600">✅ Success:</span> ${JSON.stringify(result, null, 2)}`;
            } catch (error) {
                resultDiv.innerHTML = `<span class="text-red-600">❌ Error:</span> ${error.message}`;
            }
        }

        async function testGetCampaigns() {
            const resultDiv = document.getElementById('getCampaignsResult');
            resultDiv.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Testing...';
            
            try {
                const result = await window.apiContract.getCampaigns('demo_business_1');
                resultDiv.innerHTML = `<span class="text-green-600">✅ Success:</span> ${JSON.stringify(result, null, 2)}`;
            } catch (error) {
                resultDiv.innerHTML = `<span class="text-red-600">❌ Error:</span> ${error.message}`;
            }
        }

        async function testGenerateContent() {
            const resultDiv = document.getElementById('generateContentResult');
            resultDiv.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Testing...';
            
            try {
                const result = await window.apiContract.demoGenerateContent({
                    campaign_id: 'demo_campaign_1',
                    day: 1,
                    content_type: 'reel'
                });
                resultDiv.innerHTML = `<span class="text-green-600">✅ Success:</span> ${JSON.stringify(result, null, 2)}`;
            } catch (error) {
                resultDiv.innerHTML = `<span class="text-red-600">❌ Error:</span> ${error.message}`;
            }
        }

        async function testGetContent() {
            const resultDiv = document.getElementById('getContentResult');
            resultDiv.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Testing...';
            
            try {
                const result = await window.apiContract.getContent('demo_content_1');
                resultDiv.innerHTML = `<span class="text-green-600">✅ Success:</span> ${JSON.stringify(result, null, 2)}`;
            } catch (error) {
                resultDiv.innerHTML = `<span class="text-red-600">❌ Error:</span> ${error.message}`;
            }
        }

        async function testGetAnalytics() {
            const resultDiv = document.getElementById('getAnalyticsResult');
            resultDiv.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Testing...';
            
            try {
                const result = await window.apiContract.demoGetBusinessAnalytics('demo_business_1');
                resultDiv.innerHTML = `<span class="text-green-600">✅ Success:</span> ${JSON.stringify(result, null, 2)}`;
            } catch (error) {
                resultDiv.innerHTML = `<span class="text-red-600">❌ Error:</span> ${error.message}`;
            }
        }

        async function testGetHealthScore() {
            const resultDiv = document.getElementById('getHealthScoreResult');
            resultDiv.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Testing...';
            
            try {
                const result = await window.apiContract.getHealthScore('demo_campaign_1');
                resultDiv.innerHTML = `<span class="text-green-600">✅ Success:</span> ${JSON.stringify(result, null, 2)}`;
            } catch (error) {
                resultDiv.innerHTML = `<span class="text-red-600">❌ Error:</span> ${error.message}`;
            }
        }

        async function testGetMessages() {
            const resultDiv = document.getElementById('getMessagesResult');
            resultDiv.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Testing...';
            
            try {
                const result = await window.apiContract.demoGetMessages('demo_business_1');
                resultDiv.innerHTML = `<span class="text-green-600">✅ Success:</span> ${JSON.stringify(result, null, 2)}`;
            } catch (error) {
                resultDiv.innerHTML = `<span class="text-red-600">❌ Error:</span> ${error.message}`;
            }
        }

        async function testGenerateReply() {
            const resultDiv = document.getElementById('generateReplyResult');
            resultDiv.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Testing...';
            
            try {
                const result = await window.apiContract.demoGenerateAIReply({
                    business_id: 'demo_business_1',
                    customer_message: 'How much is your membership?'
                });
                resultDiv.innerHTML = `<span class="text-green-600">✅ Success:</span> ${JSON.stringify(result, null, 2)}`;
            } catch (error) {
                resultDiv.innerHTML = `<span class="text-red-600">❌ Error:</span> ${error.message}`;
            }
        }

        async function testHealthStatus() {
            const resultDiv = document.getElementById('healthStatusResult');
            resultDiv.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Testing...';
            
            try {
                const result = await window.apiContract.getHealthStatus();
                resultDiv.innerHTML = `<span class="text-green-600">✅ Success:</span> ${JSON.stringify(result, null, 2)}`;
            } catch (error) {
                resultDiv.innerHTML = `<span class="text-red-600">❌ Error:</span> ${error.message}`;
            }
        }
    </script>
</body>
</html>
